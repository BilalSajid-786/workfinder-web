<div class="page-wrap">
  <!-- page header row -->
  <div class="page-bar">
    <h4 class="page-title">
      Applied Jobs <span class="count">({{ totalJobs }})</span>
    </h4>

    <!-- search -->
    <mat-form-field class="search-field" appearance="outline">
      <mat-label>Search</mat-label>
      <input
        matInput
        #searchBox
        placeholder="Search"
        (keyup)="applyFilter(searchBox.value)"
      />
      <button mat-icon-button matSuffix aria-label="Search">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <!-- table card -->
  <div class="card">
    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      class="jobs-table"
      matSortDisableClear
      style="background-color: #fff"
    >
      <!-- Job Title -->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Job Title</th>
        <td mat-cell *matCellDef="let row">
          <span>{{ row.title }}</span>
        </td>
      </ng-container>

      <!-- Industry -->
      <ng-container matColumnDef="company">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Company</th>
        <td mat-cell *matCellDef="let row">{{ row.company }}</td>
      </ng-container>

      <!-- Expiry date -->
      <ng-container matColumnDef="postedDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Posted Date</th>
        <td mat-cell *matCellDef="let row">
          {{ row.postedDate }}
        </td>
      </ng-container>

      <!-- City -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Location</th>
        <td mat-cell *matCellDef="let row">
          {{ row.city }}, {{ row.country }}
        </td>
      </ng-container>

      <!-- Status -->
      <ng-container matColumnDef="jobType">
        <th mat-header-cell *matHeaderCellDef>Job Type</th>
        <td mat-cell *matCellDef="let row">
          <span>
            {{ row.jobType }}
          </span>
        </td>
      </ng-container>

      <!-- Status -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let row">
          <span>
            {{ row.jobStatus }}
          </span>
        </td>
      </ng-container>

      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row; let i = index" class="actions">
          <button mat-icon-button matTooltip="View" (click)="openJobDetails(i)">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Edit">
            <mat-icon>bookmark</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Duplicate">
            <mat-icon>content_copy</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Applicants">
            <mat-icon>group</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- header & rows -->
      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
        class="sticky"
      ></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [length]="totalJobs"
      [pageSize]="pageSize"
      [pageIndex]="pageNo - 1"
      [pageSizeOptions]="[2, 5, 10]"
      (page)="onPageChange($event)"
      showFirstLastButtons
    >
    </mat-paginator>
  </div>
</div>

<!-- (onSave)="handleSave($event)"
(onApply)="handleApply($event)" -->
<app-job-details
  [selectedJob]="selectedJob"
  componentName="AppliedJobs"
></app-job-details>

<!-- <div #exampleModal class="modal fade modal-lg" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header d-flex justify-content-center position-relative">
        <h5 class="modal-title">Job Details</h5>
        <button
          type="button"
          class="btn-close position-absolute end-0 me-3"
          (click)="closeModal()"
        ></button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row mb-2">
            <div class="col-3 fw-bold">Name:</div>
            <div class="col-9">{{ selectedJob.company }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">Job Title:</div>
            <div class="col-9">{{ selectedJob.title }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">Industry:</div>
            <div class="col-9">{{ selectedJob.industry }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">City:</div>
            <div class="col-9">{{ selectedJob.city }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">Job Type:</div>
            <div class="col-9">{{ selectedJob.jobType }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">Posted Date:</div>
            <div class="col-9">{{ selectedJob.postedDate }}</div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">Skills Required:</div>
            <div class="col-9">
              <span *ngFor="let skill of selectedJob.skills">{{ skill }},</span>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-3 fw-bold">Description:</div>
            <div class="col-12">
              <textarea class="form-control" rows="10" readonly>{{
                selectedJob.description
              }}</textarea>
            </div>
            <div class="row mt-3">
              <div class="col d-flex justify-content-end">
                <button
                  type="submit"
                  class="wf-btn me-3"
                  style="font-weight: normal; margin: 0"
                >
                  Save
                </button>
                <button
                  type="submit"
                  class="wf-btn"
                  style="font-weight: normal; margin: 0"
                >
                  Apply Now
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->
