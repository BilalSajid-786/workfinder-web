<div class="page-wrap">
  <!-- page header row -->
  <div class="page-bar">
    <h4 class="page-title">
      Saved Jobs <span class="count">({{ totalJobs }})</span>
    </h4>

    <!-- search -->
    <mat-form-field class="search-field" appearance="outline">
      <mat-label>Search</mat-label>
      <input
        matInput
        #searchBox
        placeholder="Search"
        (keyup)="applyFilter(searchBox.value)"
      />
      <button mat-icon-button matSuffix aria-label="Search">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <!-- table card -->
  <div class="card">
    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      class="jobs-table"
      matSortDisableClear
      style="background-color: #fff"
    >
      <!-- Job Title -->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Job Title</th>
        <td mat-cell *matCellDef="let row">
          <span>{{ row.title }}</span>
        </td>
      </ng-container>

      <!-- Industry -->
      <ng-container matColumnDef="company">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Company</th>
        <td mat-cell *matCellDef="let row">{{ row.company }}</td>
      </ng-container>

      <!-- Expiry date -->
      <ng-container matColumnDef="postedDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Posted Date</th>
        <td mat-cell *matCellDef="let row">
          {{ row.postedDate }}
        </td>
      </ng-container>

      <!-- City -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Location</th>
        <td mat-cell *matCellDef="let row">
          {{ row.city }}, {{ row.country }}
        </td>
      </ng-container>

      <!-- Status -->
      <ng-container matColumnDef="jobType">
        <th mat-header-cell *matHeaderCellDef>Job Type</th>
        <td mat-cell *matCellDef="let row">
          <span>
            {{ row.jobType }}
          </span>
        </td>
      </ng-container>

      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row; let i = index" class="actions">
          <button mat-icon-button matTooltip="View" (click)="openJobDetails(i)">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button matTooltip="Save">
            <mat-icon>bookmark</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- header & rows -->
      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
        class="sticky"
      ></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [length]="totalJobs"
      [pageSize]="pageSize"
      [pageIndex]="pageNo - 1"
      [pageSizeOptions]="[2, 5, 10]"
      (page)="onPageChange($event)"
      showFirstLastButtons
    >
    </mat-paginator>
  </div>
</div>

<app-job-details
  [selectedJob]="selectedJob"
  componentName="SavedJobs"
  (onApply)="handleApply($event)"
></app-job-details>
