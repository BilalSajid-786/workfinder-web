<div class="page-wrap">

    <!-- page header row -->
    <div class="page-bar">
        <h1 class="page-title">Active Jobs<span class="count">({{dataTable.length}})</span></h1>
    
        <!-- search -->
        <div class="position-relative" style="width:350px;">
            <input #searchBox type="text" class="form-control pe-5" placeholder="Search" aria-label="Search"
                (keyup)="applyFilter(searchBox.value)" (keyup.enter)="applyFilter(searchBox.value)" />
    
            <!-- icon inside the input on the right -->
            <i class="bi bi-search position-absolute top-50 end-0 translate-middle-y me-3 text-muted search-icon" role="button"
                (click)="applyFilter(searchBox.value)"></i>
        </div>
    </div>
    <!-- <button class="btn btn-outline-primary" type="button" disabled (click)="applyFilter(searchBox.value)"
                aria-label="Search">
                <i class="bi bi-search"></i>
            </button> -->

    <!-- table card -->
    <div class="card">
        <table class="jobs-table" mat-table [dataSource]="dataSource" matSort (matSortChange)="tableSortChange($event)" matSortDisableClear style="background-color: #fff;">
            <!-- Job Title -->
            <ng-container matColumnDef="title">
                <th  mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort">
                    <span class="cell-strong">Job Title</span>
                </th>
                <td mat-cell *matCellDef="let row">{{ row.title }}</td>
            </ng-container>

            <!-- Industry -->
            <ng-container matColumnDef="industryName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort">
                    <span class="cell-strong">Industry</span>
                </th>
                <td mat-cell *matCellDef="let row">{{ row.industryName }}</td>
            </ng-container>

            <!-- Expiry date -->
            <ng-container matColumnDef="expiryDate">
                <th mat-header-cell *matHeaderCellDef>
                    <span class="cell-strong">Expiry date</span>
                </th>
                <td mat-cell *matCellDef="let row">
                    {{ row.expiryDate }}
                </td>
            </ng-container>

            <!-- City -->
            <ng-container matColumnDef="city">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort">
                    <span class="cell-strong">City</span>
                </th>
                <td mat-cell *matCellDef="let row">{{ row.city }}</td>
            </ng-container>

            <!-- Status -->
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>
                    <span class="cell-strong">Status</span>
                </th>
                <td mat-cell *matCellDef="let row" >
                    {{ row.isActive ? 'Active' : 'Inactive' }}
            
                    <mat-slide-toggle  class="toggle-sm" selected-icon-size="small" color="primary" [checked]="row.isActive" (change)="onToggleStatus(row, $event.checked)"
                        aria-label="Toggle job status">
                    </mat-slide-toggle>
                </td>
            </ng-container>

            <!-- Actions -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>
                    <span class="cell-strong">Actions</span>
                </th>
                <td mat-cell *matCellDef="let row" class="actions">
                    <button mat-icon-button matTooltip="View">
                        <mat-icon>visibility</mat-icon>
                    </button>
                    <button mat-icon-button matTooltip="Edit">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button matTooltip="Duplicate">
                        <mat-icon>content_copy</mat-icon>
                    </button>
                    <button mat-icon-button matTooltip="Applicants">
                        <mat-icon>group</mat-icon>
                    </button>
                </td>
            </ng-container>

            <!-- header & rows -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="sticky"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="getPagingSizeIntervals()" showFirstLastButtons
          [length]="totalCount" [pageSize]="dataTable.pageSize" [pageIndex]="dataTable.pageIndex"
          (page)="handlePage($event)">
        </mat-paginator>

        <!-- <mat-paginator style="background-color: #fff;" [pageSize]="10" [pageSizeOptions]="[5,10,20,50]" showFirstLastButtons></mat-paginator> -->
    </div>
</div>